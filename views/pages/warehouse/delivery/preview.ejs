<% layout('./shared/__template')%>

<div class='gutters'>
  <div class='col-xl-12 col-lg-6 col-md-12 col-sm-12'>
    <div class='card'>
      <div class="card-header d-flex align-items-left align-items-md-center flex-column flex-md-row">
        <h3 class="card-title"><%=title%> - <%=delivery.id%></h3>
      </div>
      <div class="card-body">
        <h3 class="card-title text-muted">Delivery Info</h3>
        <div class="separator-solid"></div>
        <h3 class="card-title text-muted">Packages</h3>
        <div class="mt-3">
          <table class="display table table-striped table-hover dataTable delivery-package-table">
            <thead>
              <tr>
                <th>Package ID</th>
                <th>PMB</th>
                <th>Consignee</th>
                <th>AWB</th>
                <th>Shipper</th>
                <th>Weight</th>
              </tr>
            </thead>
            <tbody>
              <% delivery.packages.forEach(package => { %>
              <tr data-record="<%= package.id %>">
                <td><%= package.id %></td>
                <td><%= package.customer && package.customer.pmb %></td>
                <td><%= helpers.getFullName(package.customer) %></td>
                <td><%= package.awbId %></td>
                <td><%= helpers.getFullName(package.shipper) %></td>
                <td><%= package.weight %> lbs</td>
              </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<% block('scripts').append('<script src="/js/utils.js"></script>')%>
<% block('scripts').append('<script src="/js/warehouse/delivery/preview.js"></script>')%>