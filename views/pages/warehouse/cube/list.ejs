<% layout('./shared/__template')%>
<div class='gutters'>
  <div class="col-xl-12 col-lg-6 col-md-12 col-sm-12">
    <div class="card">
      <div class="card-header d-flex align-items-left align-items-md-center flex-column flex-md-row">
        <div class="card-title"><%=title%></div>
        <a href='#' data-target="#add-cube" data-toggle='modal'
          class='btn btn-primary btn-round ml-md-auto float-right'>Add New Cube</a>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table id="cubeTable" class="display table table-striped table-hover">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Description</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <% cubes.forEach(function(cube){ %>
              <tr data-record="<%= cube.id %>">
                <td><%=cube.id%></td>
                <td><strong><%=cube.name%></strong></td>
                <td><%=cube.description%></td>
                <td>
                  <a href='#' data-id='<%=cube.id%>' data-target="#edit-cube" data-toggle='modal'
                    class='btn-edit-cube mx-3'><i class="fas fa-pen"></i></a>
                  <a href='#' class='rm-cube ml-3' data-id='<%=cube.id%>'><i class="fas fa-trash"></i></a>
                </td>
              </tr>
              <%})%>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="add-cube" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form method="POST" id="add-cube-form">
        <div class="modal-header">
          <h2 class="modal-title">Add Cube</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div class='form-group'>
            <label for="name">Name</label>
            <input class='form-control' type='text' placeholder="Name" id='name' name="name" required>
          </div>
          <div class='form-group'>
            <label for="description">Description</label>
            <input class='form-control' type='text' placeholder="Description" id='description' name="description"
              required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class='add-hazmat btn btn-primary'>Add</button>
          <button type="button" class="btn btn-danger close-del" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="edit-cube" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form method="POST" id="edit-cube-form">
        <div class="modal-header">
          <h2 class="modal-title">Edit Cube</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <input type='hidden' id='edit-cube-id' name="id" required>
          <div class='form-group'>
            <label for="name">Name</label>
            <input class='form-control' type='text' placeholder="Name" id='edit-cube-name' name="name" required>
          </div>
          <div class='form-group'>
            <label for="description">Description</label>
            <input class='form-control' type='text' placeholder="Description" id='edit-cube-description'
              name="description" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class='btn btn-primary'>Update</button>
          <button type="button" class="btn btn-danger close-del" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
  </div>
</div>

<% block('scripts').append('<script src="/js/utils.js"></script>')%>
<% block('scripts').append('<script src="/js/warehouse/cube/list.js"></script>')%>