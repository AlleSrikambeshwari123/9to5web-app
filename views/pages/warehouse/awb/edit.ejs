<% layout('./shared/__template')%>

<form method='post' id='add-awb-form'>
  <div class='gutters'>
    <div class='col-xl-12 col-lg-6 col-md-12 col-sm-12'>
      <div class='card'>
        <div class="card-header">
          <h4 class="card-title"><%= title %></h4>
        </div>
        <div class="card-body">
          <h3 class="card-title text-muted">Bill Content</h3>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group form-show-validation row">
                <label for="customerId" class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right">Consignee</label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <select id="customerId" name="customerId" class='form-control' required>
                    <option></option>
                    <% customers.forEach(customer => { %>
                    <option value="<%=customer.id%>" <% if(awb.customerId == customer.id) { %> selected <% } %>>
                      <%= customer.pmb + ' / ' + helpers.getFullName(customer)%>
                    </option>
                    <% }) %>
                  </select>
                </div>
                <div class="input-group-append">
                  <a href="#" data-toggle="modal" data-target="#add-customer-popup">
                    <span class="input-group-text">+</span></a>
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="shipper" class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right">Shipper</label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <select id="shipper" name="shipper" class='form-control' required>
                    <option></option>
                    <% shippers.forEach(shipper => { %>
                    <option value="<%=shipper.id%>" <% if(awb.shipper == shipper.id) { %> selected <% } %>>
                      <%=shipper.name%></option>
                    <% }) %>
                  </select>
                </div>
                <div class="input-group-append">
                  <a href="#" data-toggle="modal" data-target="#add-shipper-popup">
                    <span class="input-group-text">+</span></a>
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="carrier" class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right">Carrier</label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <select id="carrier" name="carrier" class='form-control' required>
                    <option></option>
                    <% carriers.forEach(carrier => { %>
                    <option value="<%=carrier.id%>" <% if(awb.carrier == carrier.id) { %> selected <% } %>>
                      <%=carrier.name%></option>
                    <% }) %>
                  </select>
                </div>
                <div class="input-group-append">
                  <a href="#" data-toggle="modal" data-target="#add-carrier-popup">
                    <span class="input-group-text">+</span></a>
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="hazmat" class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right">HAZMAT</label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <select id="hazmat" name="hazmat" class='form-control' style='width:90%;'>
                    <option></option>
                    <% hazmats.forEach(hazmat => { %>
                    <option value="<%=hazmat.id%>" <% if(awb.hazmat == hazmat.id) { %> selected <% } %>>
                      <%=hazmat.description%></option>
                    <%})%>
                  </select>
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="awb-isSed" class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right">SED</label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <select id="awb-isSed" name="isSed" class='form-control' style='width:90%;'>
                    <option value="0" <% if(awb.isSed != 1) { %> selected <% } %>>No</option>
                    <option value="1" <% if(awb.isSed == 1) { %> selected <% } %>>Yes</option>
                  </select>
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="awb-deliveryMethod" class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right">Delivery or
                  <br> Pickup</label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <select id="awb-deliveryMethod" name="deliveryMethod" class='form-control awb-deliveryMethod' data-placeholder="Select">
                    <% [{ label: 'Delivery', value: '1' }, { label: 'Pickup', value: '2' }].forEach(option => { %>
                    <option value="<%=option.value%>"
                      <% if(typeof awb !== 'undefined' && awb.deliveryMethod == option.value) { %> selected <% } %>>
                      <%=option.label%></option>
                    <%})%>
                  </select>
                </div>
              </div>
              <div class="form-group form-show-validation row hideDriver">
                <label for="driver" class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right">Driver</label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <select id="driver" name="driver" class='form-control' style='width:90%;'>
                    <option></option>
                    <% drivers.forEach(driver => { %>
                      <option value="<%=driver.id%>" <% if(awb.driver == driver.id) { %> selected <% } %>>
                        <%=driver.firstName %> <%driver.lastName%></option>
                    <%})%>
                  </select>
                </div>
              </div>
              <div class="form-group form-show-validation row ">
                <div class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"></div>
                <div class="col-lg-8 col-md-8 col-sm-8">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" name="fll_pickup" id="fll_pickup" <%= awb.fll_pickup ? "checked" : "" %> >
                  <label class="custom-control-label" for="fll_pickup">FLL Pickup </label>
                </div>
              </div>
              </div>
              <div class="form-group form-show-validation row ">
                <div class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right"></div>
                <div class="col-lg-8 col-md-8 col-sm-8">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" name="invoicecheck" id="invoicecheck" <%= awb.invoicecheck ? "checked" : "" %>>
                  <label class="custom-control-label" for="invoicecheck">Invoice </label>
                </div>
              </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="awbNotes" class="col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right">Notes</label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <textarea type='text' class='form-control' id='note' name='note'><%=awb.note%></textarea>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <script type="text/html" id="invoice-row-template">
                <div class="row form-group invoice-upload-row">
                  <input type="hidden" name="invoice.id" value="{ID}" />
                  <div class="col-md-6 col-sm-12">
                    <label>Invoice #</label>
                    <input type="text" class="form-control" name="invoice.number" />
                  </div>
                  <div class="col-md-6 col-sm-12">
                    <label>Value</label>
                    <input type="number" class="form-control" name="invoice.value" />
                  </div>
                  <div class="col-md-12">
                    <div class="custom-file-container" data-upload-id="invoice-upload-field-{CID}">
                      <label class="custom-file-container__custom-file">
                        <input type="file" class="custom-file-container__custom-file__custom-file-input" 
                          name="invoice.file"  aria-label="Choose invoice to upload">
                        <span class="custom-file-container__custom-file__custom-file-control"></span>
                      </label>
                      <div class="custom-file-container__image-preview my-2"
                        style="overflow: hidden; border: 1px dashed; display: none;"></div>
                      <button type="button" style="display: none;"
                        class="custom-file-container__image-clear btn btn-round btn-danger float-right"
                        title="Clear">Clear
                      </button>
                    </div>
                  </div>
                </div>
              </script>
              <div id="invoices-container">

              </div>
              <div class="row form-group">
                <div class="col-md-12">
                  <div class="pull-right">
                    <button class="btn btn-sm btn-primary" type="button" id="awb-form-add-invoice">
                      Add Invoice
                    </button>
                    <!-- <button class="btn btn-sm btn-danger" type="button" id="awb-form-remove-invoice">
                      Remove Invoice
                    </button> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="separator-solid"></div>
          <div class="d-flex mr-1">
            <h3 class="card-title text-muted">AWB Purchase Order List</h3>
            <a href="#" data-toggle="modal" data-target="#add-purchase-order-item-modal"
              class="btn btn-info btn-round ml-auto mr-5">Add P.O</a>
          </div>
          <div class="row">
            <div class="table-responsive mx-5 mt-3">
              <table id='awbPOTable' class='table table-striped table-hover w-100'>
                <thead>
                  <tr>
                    <th><strong>Source</strong></th>
                    <th><strong>Paid Type</strong></th>
                    <th><strong>Note</strong></th>
                    <th><strong>Service Type</strong></th>
                    <th><strong>Amount</strong></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <% (typeof purchaseOrder === 'undefined' ? [] : purchaseOrder).forEach((item) => { %>
                  <tr data-item="<%= JSON.stringify(item) %>">
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                  </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>
          </div>
          <div class="separator-solid"></div>
          <div class="d-flex mr-1">
            <h3 class="card-title text-muted">Packages - <span class='package-info'>0 Pieces / 0.00 lbs</span></h3>
            <a class="btn btn-info btn-round ml-auto mr-2"  href="/warehouse/download-pdf/pkg/<%=awb._id%>" >Print Pkgs</a>
            <a href="#add-package-popup" class="btn btn-info btn-round btn-add-package mr-5" id="link-add-package-popup">Add
              Package</a>
          </div>
          <div class="row">
            <div class="table-responsive mx-5 mt-3">
              <table id='packageTable' class='display table table-striped table-hover w-100'>
                <thead>
                  <tr>
                    <td><strong>Tracking No</strong></td>
                    <td><strong>Description</strong></td>
                    <td class="text-center"><strong>Dimension</strong></td>
                    <td class="text-center"><strong>Weight</strong></td>
                    <td class="text-center"><strong>Volumetric Weight</strong></td>
                    <td class="text-center"><strong>Status</strong></td>
                    <td></td>
                  </tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="card-action">
          <button class="btn btn-primary btn-round" type="submit">Update AWB</button>
        </div>
      </div>
    </div>
  </div>
</form>

<div class="modal fade" id="print-popup" tabindex="-1" role="dialog" aria-labelledby="print-popup" aria-hidden="true"
  style="display: none;">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Print Package Label</h2>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group text-center">
          <canvas id="pdf-preview" class="border border-dark"></canvas>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger close-del" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary print-package" id="print-package">
          Print
        </button>
      </div>
    </div>
  </div>
</div>

<div id='add-package-popup' class="card white-popup p-0 mfp-hide">
  <form method='post' id='add-package-form'>
    <input type='hidden' class='form-control' id='id' name='id' />
    <div class="card-header">
      <div class="card-title text-center">Add Package to AWB</div>
    </div>
    <div class="card-body">
      <div class='form-group'>
        <button type='button' class="btn btn-small btn-info btn-copy-last">Copy Last Package</button>
        <button type='button' class="btn btn-small btn-info copy-package-button">Copy Package</button>
      </div>
      <div class='form-group copy-package-text'>
        <label for="weight">No of Copy</label>
        <input type='number' class='form-control' id='copy' name='copy' value="1" required />
      </div>
      <div class='form-group'>
        <label for="description">Description</label>
        <textarea type='text' class='form-control' id='description' name='description' rows="3" required></textarea>
      </div>
      <div class='form-group'>
        <label for="weight">Weight</label>
        <input type='number' class='form-control' id='weight' name='weight' step="0.01" required />
      </div>
      <div class='form-group'>
        <label for="packageCalculation">Package calculation</label>
        <select class='form-control packageCalculation' id='packageCalculation' name="packageCalculation" required>
          <option></option>          
          <option value="lbs" selected>lbs</option>
          <option value="kg">Kg</option>                    
        </select>
      </div>
      
      <div class='form-group'>
        <label for="packageType">Package Type</label>
        <select class='form-control packageType' id='packageType' name="packageType" required>
          <option></option>
          <option value="BOX" selected>BOX</option>
          <option>BAG</option>
          <option>Envelope</option>
          <option>Pallet</option>
          <option>Suitcase</option>
          <option>Can</option>
          <option>Shrink Wrapped Box</option>
          <option>Shrink Wrapped Pallet</option>
          <option>Cooler</option>
          <option>Other</option>
        </select>
      </div>
      <div class='form-group'>
        <label for="originBarcode">Origin barcode</label>
        <div class="row">
          <div class="col-lg-9 col-md-9 col-sm-9">
            <%const pbarcode = processBarcode?processBarcode.barcode:'';%> 
            <select id="originBarcode" name="originBarcode" class='form-control' required>
              <option></option>
              <% barcodes.forEach(barcode => { %>
              <option value="<%=barcode.id%>" <%if( pbarcode._id== barcode.id ){%>selected=="selected"<%}%>><%=barcode.barcode%></option>
              <% }) %>
            </select>
          </div>
          <div class="input-group-append col-lg-2">
            <a href="#" id="refreshBarcode" onclick="refreshBarcode()">
              <span class="input-group-text">Refresh</span></a>
          </div>
          <div class="input-group-append col-lg-1">
            <a href="#" data-toggle="modal" data-target="#add-barcode-popup" onclick="closeAddPackage()">
              <span class="input-group-text">+</span></a>
          </div>
        </div>
      </div>
      <div class='form-group'>
        <label>Dimensions</label>
        <div class='row'>
          <div class='col-md-4'><input type='number' class='form-control dimensions' id='W' name='W' placeholder='W' />
          </div>
          <div class='col-md-4'><input type='number' class='form-control dimensions' id='H' name='H' placeholder='H' />
          </div>
          <div class='col-md-4'><input type='number' class='form-control dimensions' id='L' name='L' placeholder='L' />
          </div>
        </div>
      </div>
    </div>
    <div class="card-action text-center">
      <button class="btn btn-primary" type="submit" id='btn-add-package'>Add</button>
      <button class="btn btn-danger" type="button" id='btn-cancel-add'>Cancel</button>
    </div>
  </form>
</div>

<div class="modal fade" id="add-shipper-popup" tabindex="-1" role="dialog" style="display: none;">
  <div class="modal-dialog" role="document">
    <form method="post" id="add-shipper-form">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Add Shipper</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div class='form-group row'>
            <label for="shipper-name" class="col-md-3 mt-sm-2 text-right">Name</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="Name" id='shipper-name' name="name" required />
            </div>
          </div>
          <div class='form-group row'>
            <label for="shipper-firstName" class="col-md-3 mt-sm-2 text-right">Contact Name</label>
            <div class="col-md-4">
              <input type='text' class='form-control' placeholder="First Name" id='shipper-firstName' name="firstName"
                required />
            </div>
            <div class="col-md-4">
              <input type='text' class='form-control' placeholder="Last Name" id='shipper-lastName' name="lastName"
                required />
            </div>
          </div>
          <div class='form-group row'>
            <label for="shipper-telephone" class="col-md-3 mt-sm-2 text-right">Phone</label>
            <div class="col-md-8">
              <input type='number' class='form-control' placeholder="(242) xxx-xxxx" id='shipper-telephone'
                name="telephone" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="shipper-email" class="col-md-3 mt-sm-2 text-right">Email</label>
            <div class="col-md-8">
              <input type="email" class='form-control' placeholder="name@example.com" id='shipper-email' name="email"
                required />
            </div>
          </div>
          <div class='form-group row'>
            <label for="shipper-tax" class="col-md-3 mt-sm-2 text-right">Tax ID</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="xxx-xxx-xxxx" id='shipper-tax' name="tax" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="shipper-address" class="col-md-3 mt-sm-2 text-right">Address</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="Address" id='shipper-address' name="address" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="shipper-city" class="col-md-3 mt-sm-2 text-right">City</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="City" id='shipper-city' name="city" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="shipper-state" class="col-md-3 mt-sm-2 text-right">State</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="State" id='shipper-state' name="state" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="shipper-zip" class="col-md-3 mt-sm-2 text-right">Zip</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="Zip" id='shipper-zip' name="zip" />
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger close-del" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" id='save-shipper'>Create</button>
        </div>
      </div>
    </form>
  </div>
</div>

<div class="modal fade" id="add-carrier-popup" tabindex="-1" role="dialog" style="display: none;">
  <div class="modal-dialog" role="document">
    <form method="post" id="add-carrier-form">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Add Carrier</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div class='form-group row'>
            <label for="carrier-name" class="col-md-3 mt-sm-2 text-right">Name</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="Name" id='carrier-name' name="name" required />
            </div>
          </div>
          <div class='form-group row'>
            <label for="carrier-firstName" class="col-md-3 mt-sm-2 text-right">Contact Name</label>
            <div class="col-md-4">
              <input type='text' class='form-control' placeholder="First Name" id='carrier-firstName' name="firstName"
                required />
            </div>
            <div class="col-md-4">
              <input type='text' class='form-control' placeholder="Last Name" id='carrier-lastName' name="lastName"
                required />
            </div>
          </div>
          <div class='form-group row'>
            <label for="carrier-telephone" class="col-md-3 mt-sm-2 text-right">Phone</label>
            <div class="col-md-8">
              <input type='number' class='form-control' placeholder="(242) xxx-xxxx" id='carrier-telephone'
                name="telephone" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="carrier-email" class="col-md-3 mt-sm-2 text-right">Email</label>
            <div class="col-md-8">
              <input type="email" class='form-control' placeholder="name@example.com" id='carrier-email' name="email" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="carrier-tax" class="col-md-3 mt-sm-2 text-right">Tax ID</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="xxx-xxx-xxxx" id='carrier-tax' name="tax" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="carrier-address" class="col-md-3 mt-sm-2 text-right">Address</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="Address" id='carrier-address' name="address" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="carrier-city" class="col-md-3 mt-sm-2 text-right">City</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="City" id='carrier-city' name="city" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="carrier-state" class="col-md-3 mt-sm-2 text-right">State</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="State" id='carrier-state' name="state" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="carrier-state" class="col-md-3 mt-sm-2 text-right">Country</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="Country" id='carrier-state' name="country" />
            </div>
          </div>
          <div class='form-group row'>
            <label for="carrier-zip" class="col-md-3 mt-sm-2 text-right">Zip</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="Zip" id='carrier-zip' name="zip" />
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger close-del" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" id='save-carrier'>Create</button>
        </div>
      </div>
    </form>
  </div>
</div>

<div class="modal fade" id="add-customer-popup" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
  <div class="modal-dialog" role="document" style="max-width: 800px;">
    <div class="modal-content">
      <form method="POST" id="add-customer-form">
        <div class="modal-header">
          <h2 class="modal-title" id="exampleModalLabel2">Add New Consignee</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <!--<div class="modal-body">
          <div class="form-group form-show-validation row">
            <label for="c-companyId" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">Company </label>
            <div class="col-lg-9 col-md-8 col-sm-8">
              <select id="c-companyId" name="companyId" class="form-control" required>
                <option value='9to5'>9to5</option>
                <option value='pmb'>Post Boxes</option>
              </select>
            </div>
          </div>
          <div class="form-group form-show-validation row">
            <label for="c-pmb" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">PMB </label>
            <div class="col-lg-9 col-md-8 col-sm-8">
              <input type="number" class="form-control" id="c-pmb" name="pmb" placeholder="PMB" value="9000">
            </div>
          </div>
          <div class="form-group form-show-validation row">
            <label for="c-firstName" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">First Name </label>
            <div class="col-lg-9 col-md-8 col-sm-8">
              <input type="text" class="form-control" id="c-firstName" name="firstName" placeholder="First Name"
                required>
            </div>
          </div>
          <div class="form-group form-show-validation row">
            <label for="lastName" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">Last Name </label>
            <div class="col-lg-9 col-md-8 col-sm-8">
              <input type="text" class="form-control" id="lastName" name="lastName" placeholder="Last Name">
            </div>
          </div>
          <div class="form-group form-show-validation row">
            <label for="telephone" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">Telephone</label>
            <div class="col-lg-9 col-md-8 col-sm-8">
              <input type="tel" class="form-control" id="telephone" name="telephone" placeholder="(242)-123-4567">
            </div>
          </div>
          <div class="form-group form-show-validation row">
            <label for="email" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">Email address </label>
            <div class="col-lg-9 col-md-8 col-sm-8">
              <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com">
            </div>
          </div>
        </div>-->
        <div class="modal-body">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group form-show-validation row">
                <label for="companyId" class="col-lg-4 col-md-4 col-sm-4 mt-sm-2 text-right">Company </label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <select id="companyId" name="companyId" class="form-control" required>
                    <option value='9to5'>9to5</option>
                    <option value='pmb'>Post Boxes</option>
                  </select>
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="pmb" class="col-lg-4 col-md-4 col-sm-4 mt-sm-2 text-right">PMB </label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <input type="number" class="form-control" id="pmb" name="pmb" placeholder="PMB" value="9000">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="firstName" class="col-lg-4 col-md-4 col-sm-4 mt-sm-2 text-right">First Name </label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <input type="text" class="form-control" id="firstName" name="firstName" placeholder="First Name"
                    required>
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="lastName" class="col-lg-4 col-md-4 col-sm-4 mt-sm-2 text-right">Last Name </label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <input type="text" class="form-control" id="lastName" name="lastName" placeholder="Last Name">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="telephone" class="col-lg-4 col-md-4 col-sm-4 mt-sm-2 text-right">Telephone</label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <input type="tel" class="form-control" id="telephone" name="telephone" placeholder="(242)-123-4567">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="email" class="col-lg-4 col-md-4 col-sm-4 mt-sm-2 text-right">Email address </label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="password" class="col-lg-4 col-md-4 col-sm-4 mt-sm-2 text-right">Password </label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <input type="password" class="form-control" id="password" name="password" placeholder="New Password">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="confirmPassword" class="col-lg-4 col-md-4 col-sm-4 mt-sm-2 text-right">Confirm Password
                </label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <input type="password" class="form-control" id='confirmPassword' name="confirmPassword"
                    placeholder="Confirm New Password">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="location" class="col-lg-4 col-md-4 col-sm-4 mt-sm-2 text-right">Select Location </label>
                <div class="col-lg-8 col-md-8 col-sm-8">
                  <select id="location" name="location" class=" form-control ">
                    <% locations.forEach(location => { %>
                    <option value='<%=location.id%>'><%=location.name%></option>
                    <% }) %>
                  </select>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group form-show-validation row">
                <label for="address" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">Address </label>
                <div class="col-lg-7 col-md-8 col-sm-8">
                  <input type="text" class="form-control" id="address" name="address" placeholder="Address">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="city" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">City </label>
                <div class="col-lg-7 col-md-8 col-sm-8">
                  <input type="text" class="form-control" id="city" name="city" placeholder="City">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="state" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">State </label>
                <div class="col-lg-7 col-md-8 col-sm-8">
                  <input type="text" class="form-control" id="state" name="state" placeholder="State">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="country" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">Country </label>
                <div class="col-lg-7 col-md-8 col-sm-8">
                  <input type="text" class="form-control" id="country" name="country" placeholder="Country">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="zipcode" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">Zipcode </label>
                <div class="col-lg-7 col-md-8 col-sm-8">
                  <input type="text" class="form-control" id="zipcode" name="zipcode" placeholder="Zipcode">
                </div>
              </div>
              <div class="form-group form-show-validation row">
                <label for="note" class="col-lg-3 col-md-4 col-sm-4 mt-sm-2 text-right">Note </label>
                <div class="col-lg-7 col-md-8 col-sm-8">
                  <textarea id="note" class="form-control" name="note"></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger close-del" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Add Consignee</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="add-purchase-order-item-modal" role="dialog" aria-hidden="true" style="display: none;">
  <div class="modal-dialog" role="document" style="max-width: 800px !important;">
    <div class="modal-content">
      <form name="add-purchase-order-item-form">
        <div class="modal-header">
          <h2 class="modal-title">AWB Purchase Order Item</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body row">
          <div class="col-md-12">
            <div class="form-group">
              <label>Source</label>
              <select class="form-control" name="source" required>
                <option value="fll">9-5 FLL</option>
                <option value="nas">NAS</option>
              </select>
            </div>
            <div class="form-group">
              <label>Paid Type</label>
              <select name="paidTypeId" class="form-control" required>
                <% paidTypes.forEach(item => { %>
                <option value="<%=item.id%>" data-name="<%=item.name%>"><%=item.name%></option>
                <% }) %>
              </select>
            </div>
            <div class="form-group">
              <label>Service Type</label>
              <select class="form-control" name="serviceTypeId" required>
                <% serviceTypes.forEach(serviceType => { %>
                <option value="<%=serviceType.id%>" data-id="<%=serviceType.id%>" data-amount="<%=serviceType.amount%>"
                  data-name="<%=serviceType.name%>">
                  <%=serviceType.name%> ($<%= Number(serviceType.amount).toFixed(2) %>)
                </option>
                <% }) %>
              </select>
            </div>
            <div class="form-group">
              <label>Notes</label>
              <textarea class="form-control" name="notes" rows="3"></textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Add</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="alertSEDPOPUP" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel2"
  aria-hidden="true" style="display: none;">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="exampleModalLabel2">Is SED Required</h2>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        The value of the this AWB is <span id='sedvalue'></span> which may pass the SED Limit. If one of the items are
        greater than $2500 this AWB requires the SED declaration.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary sed-click" data-dismiss="modal" data-id="0">No</button>
        <button type="button" class="btn btn-primary btn-success sed-click " data-dismiss="modal" data-id="1"
          id="sed-click">SED REQUIRED</button>

      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="confirmPkgDel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel2"
  aria-hidden="true" style="display: none;">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="exampleModalLabel2">Confirmation Required</h2>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <input type='hidden' id='pkg-tracking' />
        Are you sure you want to delete this package?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary close-del" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-danger rm-package" id='rmPackage'>Delete</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="add-barcode-popup" tabindex="-1" role="dialog" style="display: none;">
  <div class="modal-dialog" role="document" >
    <form method="post" id="add-barcode-form">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Add Barcode</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <div class='form-group row'>
            <label for="carrier-name" class="col-md-3 mt-sm-2 text-right">Bacrode</label>
            <div class="col-md-8">
              <input type='text' class='form-control' placeholder="Bacrode" id='barcode' name="barcode" required />
            </div>
          </div>          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger close-del" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" id='save-barcode'>Create</button>
        </div>
      </div>
    </form>
  </div>
</div>
<script>
  window.packages = <%- JSON.stringify(packages) %>;
  window.invoices = <%- JSON.stringify(invoices) %>;
</script>
<% block('scripts').append('<script src="/js/utils.js"></script>')%>
<% block('scripts').append('<script src="/js/warehouse/awb/common.js"></script>')%>
<% block('scripts').append('<script src="/js/warehouse/awb/invoices.js"></script>')%>
<% block('scripts').append('<script src="/js/warehouse/awb/edit.js"></script>')%>
